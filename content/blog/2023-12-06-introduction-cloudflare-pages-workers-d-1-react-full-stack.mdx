---
slug: 2023-12-06-introduction-cloudflare-pages-workers-d-1-react-full-stack
title: í’€ìŠ¤íƒ ê°•ì˜ 1í¸. Cloudflare Pages + Workers + D1 + Reactë¡œ í’€ìŠ¤íƒ ê°œë°œí•˜ê¸°
date: 2023-12-06T11:55:18.958Z
description: Cloudflare ë¬´ë£Œ ì„œë¹„ìŠ¤ë¡œ í’€ìŠ¤íƒ ì›¹ ì•± ë§Œë“¤ê¸°
meta:
  keywords:
    - cloudflare
    - pages
    - d1
    - workers
    - react
published: true
---

# í’€ìŠ¤íƒ ê°•ì˜ 1í¸. Cloudflare Pages + Workers + D1 + Reactë¡œ í’€ìŠ¤íƒ ê°œë°œí•˜ê¸°

ì•ˆë…•í•˜ì„¸ìš”?

ì˜¤ëŠ˜ì€ ì§€ê¸ˆê¹Œì§€ ë¯¸ë¤„ì™”ë˜ Cloudflare ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•œ í’€ìŠ¤íƒ ê°œë°œí•˜ê¸°ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

CloudflareëŠ” ì•„ë§ˆì¡´ AWSì— ë§ë¨¹ëŠ” í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•´ ì£¼ëŠ”ë°ìš”.

ëª‡ëª‡ ê¸°ëŠ¥ë“¤ì€ ì•„ì§ ë² íƒ€ ë‹¨ê³„ì´ì§€ë§Œ ì €ë„ ì§€ê¸ˆ ì˜ ì“°ê³  ìˆëŠ” Pagesë¥¼ ë¹„ë¡¯í•´ì„œ ëª‡ëª‡ ì„œë¹„ìŠ¤ë“¤ì„ ê³µì§œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜¤ëŠ˜ ìš°ë¦¬ê°€ ì‚´í´ë³¼ Cloudflareì˜ ì„œë¹„ìŠ¤ëŠ” ì›¹ í˜ì´ì§€ í˜¸ìŠ¤íŒ…ì„ ìœ„í•œ Pagesë€ ì„œë¹„ìŠ¤ì™€ í•¨ê»˜, ë°±ì—”ë“œë¥¼ ìœ„í•œ Workersì™€ í•¨ê»˜ DB êµ¬í˜„ì„ ìœ„í•œ D1 ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ê²ë‹ˆë‹¤.

ê·¸ë¦¬ê³  í”„ë¡ íŠ¸ì—”ë“œëŠ” ë‹¹ì—°íˆ Reactê°€ ë˜ê² ì£ .

ì¼ë‹¨ Cloudflare ê³„ì •ì´ ìˆë‹¤ê³  ê°€ì •í•˜ê³  ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.

ì „ì²´ ê°•ì˜ ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.

1. [í’€ìŠ¤íƒ ê°•ì˜ 1í¸. Cloudflare Pages + Workers + D1 + Reactë¡œ í’€ìŠ¤íƒ ê°œë°œí•˜ê¸°](https://mycodings.fly.dev/blog/2023-12-06-introduction-cloudflare-pages-workers-d-1-react-full-stack)

2. [í’€ìŠ¤íƒ ê°•ì˜ 2í¸. Cloudflare Pages ì•ˆì—ì„œ Workersë¥¼ ì´ìš©í•œ D1 DB ì œì–´í•˜ëŠ” API ë§Œë“¤ê¸°](https://mycodings.fly.dev/blog/2023-12-09-fullstack-cloudflare-pages-workers-d-1-react-part-2)

3. [í’€ìŠ¤íƒ ê°•ì˜ 3í¸. AstroJSì™€ Cloudflare Pages, D1, Drizzle ORMìœ¼ë¡œ ê°œë°œí•˜ê¸°](https://mycodings.fly.dev/blog/2023-12-09-fullstack-astrojs-cloudflare-pages-d-1-drizzle-orm)

4. [í’€ìŠ¤íƒ ê°•ì˜ 4í¸. Remix + Cloudflare Pages + D1 DB + Drizzle ORM](https://mycodings.fly.dev/blog/2023-12-10-fullstack-remix-cloudflare-pages-d-1-db-drizzle-orm)

5. [í’€ìŠ¤íƒ ê°•ì˜ 5í¸. Next.js ì„œë²„ ë Œë”ë§ì„ ì´ìš©í•˜ì—¬ Cloudflare Pagesë¡œ ë°°í¬í•˜ê¸°(D1 DB, Drizzle ORM)](https://mycodings.fly.dev/blog/2023-12-30-fullstack-tutorial-nextjs-cloudflare-with-d-1-db)

---

** ëª© ì°¨ **

1. [Viteë¡œ React í…œí”Œë¦¿ ì‘ì„±](#1-viteë¡œ-react-í…œí”Œë¦¿-ì‘ì„±)

2. [Pagesì— ì •ì  ì‚¬ì´íŠ¸ë¡œ ì˜¬ë¦¬ê¸°](#2-pagesì—-ì •ì -ì‚¬ì´íŠ¸ë¡œ-ì˜¬ë¦¬ê¸°)

3. [Workers ì´ìš©í•˜ì—¬ ë°±ì—”ë“œ ë¡œì§ êµ¬í˜„í•˜ê¸°](#3-workers-ì´ìš©í•˜ì—¬-ë°±ì—”ë“œ-ë¡œì§-êµ¬í˜„í•˜ê¸°)

4. [D1 ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©í•˜ê¸°](#4-d1-ë°ì´í„°ë² ì´ìŠ¤-ì‚¬ìš©í•˜ê¸°)
---

## 1. Viteë¡œ React í…œí”Œë¦¿ ì‘ì„±

CloudflareëŠ” wranglerë¼ëŠ” ì»¤ë§¨ë“œë¼ì¸ ëª…ë ¹ì–´ë¥¼ ì§€ì›í•˜ëŠ”ë°ìš”.

ì´ ì•±ì€ ì¡°ê¸ˆ ë” ë²”ìš©ì´ë¼, ìš°ë¦¬ê°€ ì˜¤ëŠ˜ êµ¬í˜„í•  React ì•± êµ¬í˜„ì— ìˆì–´ ì•„ì£¼ ë¶ˆí¸í•©ë‹ˆë‹¤.

ê·¸ë˜ì„œ ì²˜ìŒë¶€í„° Viteë¡œ React ì•±ì„ ì‘ì„±í•œ ë‹¤ìŒ í•˜ë‚˜í•˜ë‚˜ ì¶”ê°€í•˜ë©´ì„œ Cloudflareì˜ Pagesì™€ Workers ë° D1 ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```bash
âœ  blog> npm create vite@latest
âœ” Project name: â€¦ cloudflare-pages-d1-stack-example
âœ” Select a framework: â€º React
âœ” Select a variant: â€º TypeScript

Scaffolding project in /Users/cpro95/Codings/Javascript/blog/cloudflare-pages-d1-stack-example...

Done. Now run:

  cd cloudflare-pages-d1-stack-example
  npm install
  npm run dev
```

CSSë¥¼ ìœ„í•œ TailwindCSS ì„¤ì¹˜ë„ ì´ì–´ì„œ í•˜ê² ìŠµë‹ˆë‹¤.

```bash
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

ê·¸ë¦¬ê³  tailwind.config.js íŒŒì¼ë„ ì•„ë˜ì™€ ê°™ì´ ë°”ê¾¸ì‹œë©´ ë©ë‹ˆë‹¤.

```js
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

ê·¸ë¦¬ê³  Tailwind ë””ë ‰í‹°ë¸Œë¥¼ index.css íŒŒì¼ì— ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.

```js
@tailwind base;
@tailwind components;
@tailwind utilities;
```

ì´ì œ ëª¨ë“  ì¤€ë¹„ê°€ ëë‚¬ëŠ”ë°ìš”.

---

## 2. Pagesì— ì •ì  ì‚¬ì´íŠ¸ë¡œ ì˜¬ë¦¬ê¸°

Cloudflare PagesëŠ” ë¬´ë£Œ ì •ì  ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤ì¸ë°ìš”.

ë„ë©”ì¸ì€ ***.pages.dev ë¼ëŠ” ì´ë¦„ì…ë‹ˆë‹¤.

ì œê°€ ì˜ˆì „ì— ë§Œë“¤ì—ˆë˜ [mylotto.pages.dev](https://mylotto.pages.dev)ë¼ëŠ” ì‚¬ì´íŠ¸ê°€ ìˆëŠ”ë°ìš”.

ì´ ì‚¬ì´íŠ¸ëŠ” Next.jsë¥¼ ì´ìš©í•œ ì •ì ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤.

ë‹¨ìˆœí•˜ê²Œ Github ì—°ë™ í›„ì— git pushë§Œ í•˜ë©´ Cloudflareê°€ ì•Œì•„ì„œ ë¹Œë“œ í›„ Pagesì— ì˜¬ë ¤ì£¼ì£ .

Cloudflareê°€ ì œì•ˆí•˜ëŠ” ë°©ë²•ì€ Githubì„ ì´ìš©í•œ ë°©ì‹ì¸ë°ìš”.

ì €ëŠ” ì»¤ë§¨ë“œë¼ì¸ ëª…ë ¹ì–´ì¸ wranglerë¥¼ ì‚¬ìš©í•´ì„œ Pages ì•± ë§Œë“¤ê¸°, ê·¸ë¦¬ê³  ë°°í¬(deploy)ê¹Œì§€ í•´ ë³´ê² ìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ wrangler ëª…ë ¹ì–´ë¥¼ ì„¤ì¹˜í•´ì•¼ í•˜ëŠ”ë°ìš”.

npmìœ¼ë¡œ ê¸€ë¡œë²Œí•˜ê²Œ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ë„ ìˆê³ , í•´ë‹¹ ì•±ì— ë¡œì»¬ë¡œ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤.

ìµœê·¼ ì¶”ì„¸ì¸ ë¡œì»¬ì— wrangler ì•±ì„ ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤.

```bash
npm install -D wrangler

âœ  cloudflare-pages-d1-stack-example> npx wrangler
wrangler

Commands:
  wrangler docs [command..]            ğŸ“š Open wrangler's docs in your browser
  wrangler init [name]                 ğŸ“¥ Initialize a basic Worker project, including a wrangler.toml file
  wrangler generate [name] [template]  âœ¨ Generate a new Worker project from an existing Worker template. See https://github.com/cloudflare/templates
  wrangler dev [script]                ğŸ‘‚ Start a local server for developing your worker
  wrangler deploy [script]             ğŸ†™ Deploy your Worker to Cloudflare.  [aliases: publish]
  wrangler delete [script]             ğŸ—‘  Delete your Worker from Cloudflare.
  wrangler tail [worker]               ğŸ¦š Starts a log tailing session for a published Worker.
  wrangler secret                      ğŸ¤« Generate a secret that can be referenced in a Worker
  wrangler secret:bulk [json]          ğŸ—„ï¸  Bulk upload secrets for a Worker
  wrangler kv:namespace                ğŸ—‚ï¸  Interact with your Workers KV Namespaces
  wrangler kv:key                      ğŸ”‘ Individually manage Workers KV key-value pairs
  wrangler kv:bulk                     ğŸ’ª Interact with multiple Workers KV key-value pairs at once
  wrangler pages                       âš¡ï¸ Configure Cloudflare Pages
  wrangler queues                      ğŸ‡¶ Configure Workers Queues
  wrangler r2                          ğŸ“¦ Interact with an R2 store
  wrangler dispatch-namespace          ğŸ“¦ Interact with a dispatch namespace
  wrangler d1                          ğŸ—„  Interact with a D1 database
  wrangler hyperdrive                  ğŸš€ Configure Hyperdrive databases
  wrangler ai                          ğŸ¤– Interact with AI models
  wrangler constellation               ğŸ¤– Interact with Constellation models
  wrangler vectorize                   ğŸ§® Interact with Vectorize indexes
  wrangler pubsub                      ğŸ“® Interact and manage Pub/Sub Brokers
  wrangler mtls-certificate            ğŸªª Manage certificates used for mTLS connections
  wrangler login                       ğŸ”“ Login to Cloudflare
  wrangler logout                      ğŸšª Logout from Cloudflare
  wrangler whoami                      ğŸ•µï¸  Retrieve your user info and test your auth config
  wrangler types                       ğŸ“ Generate types from bindings & module rules in config
  wrangler deployments                 ğŸš¢ List and view details for deployments
  wrangler rollback [deployment-id]    ğŸ”™ Rollback a deployment

Flags:
  -j, --experimental-json-config  Experimental: Support wrangler.json  [boolean]
  -c, --config                    Path to .toml configuration file  [string]
  -e, --env                       Environment to use for operations and .env files  [string]
  -h, --help                      Show help  [boolean]
  -v, --version                   Show version number  [boolean]
âœ  cloudflare-pages-d1-stack-example>
```

'npx wrangler'ë¼ê³  ì¹˜ë©´ wrangler ëª…ë ¹ì–´ì˜ ë„ì›€ë§ì´ ë‚˜ì˜¤ëŠ”ë°ìš”.

ì´ wranglerë¼ëŠ” ì»¤ë§¨ë“œë¼ì¸ ëª…ë ¹ì–´ê°€ Cloudflareì˜ ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ CLI ìƒíƒœì—ì„œ ì´ìš©í•˜ê²Œ í•´ ì¤ë‹ˆë‹¤.

ê·¸ëŸ¼ ì§€ê¸ˆ ë§Œë“¤ì—ˆë˜ React ì•±ì—ì„œ TailwindCSSëŠ” ì´ˆê¸°í™”í–ˆê³ , App.tsx íŒŒì¼ë§Œ ì¡°ê¸ˆ ìˆ˜ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.

```js
// src/App.tsx

import "./App.css";

function App() {
  return (
    <>
      <div className="text-2xl font-bold flex justify-center items-center p-8">
        Welcome to React with Pages + Workers + D1 Example
      </div>
    </>
  );
}

export default App;
```

App.css ì•ˆì— ìˆëŠ” ë‚´ìš©ë„ ë‹¤ ì§€ìš°ì‹œë©´ ë©ë‹ˆë‹¤.

"npm run dev" ëª…ë ¹ì–´ë¡œ React ì•±ì´ ì œëŒ€ë¡œ ì‘ë™ë˜ëŠ”ì§€ í•œ ë²ˆ ë³¼ê¹Œìš”?

![](https://blogger.googleusercontent.com/img/a/AVvXsEhTX6AsFVTjdeKC-zowdgVZbjiw5KQNhDP6MSeE5fsjucQqm1jt3fAGGlXU85Zhy6bywjwEfC_F4J5apF93Ih_1kWYTYIZgB_Iilo7UrhhZxeTY6lDW_DzF2vmcRKcEyl17dW9gJ0zt75Kzg9FOyJFviqanG1E8E8Pg9lVG57FT5v4MFhvKGd1aXVBP3aQ)

ìœ„ì™€ ê°™ì´ ìš°ë¦¬ê°€ ë§Œë“  ì•±ì´ ì œëŒ€ë¡œ ë‚˜ì˜¤ê³  ìˆìŠµë‹ˆë‹¤.

ì´ì œ ì´ê±¸ Cloudflare EDGE ì„œë²„ì— ì˜¬ë¦¬ëŠ” ê²Œ ë‹¤ìŒ ìˆœì„œì¸ë°ìš”.

PagesëŠ” ì •ì ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤ë¼ê³  í–ˆì—ˆì–ì•„ìš”.

ê·¸ë˜ì„œ ìš°ë¦¬ React ì•±ì„ build í•´ì•¼ í•©ë‹ˆë‹¤.

```bash
âœ  cloudflare-pages-d1-stack-example> npm run build

> cloudflare-pages-d1-stack-example@0.0.0 build
> tsc && vite build

vite v5.0.6 building for production...
âœ“ 32 modules transformed.
dist/index.html                   0.46 kB â”‚ gzip:  0.30 kB
dist/assets/index-sWUpnV8R.css    4.72 kB â”‚ gzip:  1.47 kB
dist/assets/index-UJjASkPh.js   142.83 kB â”‚ gzip: 45.90 kB
âœ“ built in 2.29s
âœ  cloudflare-pages-d1-stack-example> tree --du -h ./dist
[146K]  ./dist
â”œâ”€â”€ [144K]  assets
â”‚Â Â  â”œâ”€â”€ [139K]  index-UJjASkPh.js
â”‚Â Â  â””â”€â”€ [4.6K]  index-sWUpnV8R.css
â”œâ”€â”€ [ 464]  index.html
â””â”€â”€ [1.5K]  vite.svg
```

dist í´ë”ì— ë¹Œë“œ ëœ ë¦¬ì•¡íŠ¸ ì•±ì´ ìƒì„±ë©ë‹ˆë‹¤.

ì´ 146K í¬ê¸°ë„¤ìš”.

Reactê°€ ìš©ëŸ‰ì´ ìˆê¸´ ìˆë„¤ìš”.

ê·¸ëŸ° ë©´ì—ì„œëŠ” AstroJSê°€ ì •ì  ì‚¬ì´íŠ¸ì—ì„œëŠ” ìµœê³ ì¸ë°ìš”.

ê·¸ë˜ë„ Reactì˜ JSXê°€ ì €ëŠ” í›¨ì”¬ ì¢‹ìŠµë‹ˆë‹¤.

SvelteJSë‚˜ VueJSë„ ì ê¹ í•´ë´¤ëŠ”ë°ìš”.

Reactì˜ JSXì— ìµìˆ™í•´ì„œì¸ì§€ ê²°êµ­ì—ëŠ” ë‹¤ì‹œ Reactë¡œ ëŒì•„ì˜¤ê²Œ ë˜ë”êµ°ìš”.

AstroJSë„ Reactë¥¼ ë Œë”ë§ ì—”ì§„ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ ìµœê·¼ì— AstroJSì—ë„ ë¹ ì¡Œì—ˆëŠ”ë°ìš”.

AstroJSëŠ” ì œ ì§€ë‚œ ê°•ì¢Œê°€ ìˆìœ¼ë‹ˆ ê¼­ ì°¾ì•„ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.

[AstroJS ê°•ì¢Œ 1í¸](https://mycodings.fly.dev/blog/2023-10-07-astrojs-tutorial-how-to-handle-data-in-astrojs)

ì´ì œ Cloudflareì— distë€ í´ë”ë¥¼ ì˜¬ë¦¬ë©´ ë©ë‹ˆë‹¤.

ë¨¼ì €, Cloudflareì— ë¡œê·¸ì¸í•´ì•¼ í•˜ëŠ”ë°ìš”.

```bash
âœ  cloudflare-pages-d1-stack-example> npx wrangler login
 â›…ï¸ wrangler 3.19.0
-------------------
Attempting to login via OAuth...
Opening a link in your default browser: https://dash.cloudflare.com/oauth2/auth?response_type=code&client_id=54d11594-84e4-41aa-b438-e81b8fa78ee7&redirect_uri=http%3A%2F%2Flocalhost%3A8976%2Foauth%2Fcallback&scope=account%3Aread%20user%3Aread%20workers%3Awrite%20workers_kv%3Awrite%20workers_routes%3Awrite%20workers_scripts%3Awrite%20workers_tail%3Aread%20d1%3Awrite%20pages%3Awrite%20zone%3Aread%20ssl_certs%3Awrite%20constellation%3Awrite%20ai%3Aread%20offline_access&state=uVwuHca-XoL3XUs0vvn-t94Rfc4Ivtab&code_challenge=Of_FujfUjvsu6R0jICrg1ue7f-mMV8lCQ6o&code_challenge_method=S256
Successfully logged in.
âœ  cloudflare-pages-d1-stack-example
```

ì•„ë§ˆ ë¸Œë¼ìš°ì €ê°€ ëœ¨ë©´ì„œ ë¡œê·¸ì¸í•˜ë¼ê³  í•˜ê³  ê¶Œí•œì„ ë‹¬ë¼ê³  í•  ê²ë‹ˆë‹¤.

ê¶Œí•œì„ ì£¼ë©´ ìœ„ì™€ ê°™ì´ í„°ë¯¸ë„ìƒì—ì„œ ë³¸ê²©ì ì¸ wrangler ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

```bash
âœ  cloudflare-pages-d1-stack-example> npx wrangler pages deploy ./dist
No project selected. Would you like to create one or use an existing project?
â¯ Create a new project
  Use an existing project
âœ” Enter the name of your new project: â€¦ pages-d1-fullstack-example
âœ” Enter the production branch name: â€¦ production
âœ¨ Successfully created the 'pages-d1-fullstack-example' project.
ğŸŒ  Uploading... (4/4)

âœ¨ Success! Uploaded 4 files (1.52 sec)

âœ¨ Deployment complete! Take a peek over at https://eaa75f17.pages-d1-fullstack-example.pages.dev
âœ  cloudflare-pages-d1-stack-example>
```

ìœ„ì™€ ê°™ì´ wrangler ëª…ë ¹ì–´ ì¤‘ì— pages í•­ëª©ì—ì„œ ë°”ë¡œ deploy ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

ëì—ëŠ” ì—…ë¡œë“œí•˜ê³  ì‹¶ì€ í´ë”, ì¦‰ ìš°ë¦¬ëŠ” React ì•±ì´ ì»´íŒŒì¼ëœ 'dist' í´ë”ë¥¼ í†µì±„ë¡œ ì˜¬ë¦¬ëŠ” ê±°ì£ .

ìœ„ì™€ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ë‘ ê°€ì§€ë¥¼ ë¬¼ì–´ë³´ëŠ”ë°ìš”.

í˜„ì¬ í´ë”ë¥¼ ì—…ë¡œë“œí•˜ëŠ” ê±°ë¼ "Create a new project" ë¶€ë¶„ì„ ëˆ„ë¥¸ ë‹¤ìŒ ì›í•˜ëŠ” ì´ë¦„ì„ ì ìœ¼ì‹œë©´ ë©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  'github branch name'ì„ ë¬¼ìœ¼ë©´ ê·¸ëƒ¥ ì—”í„° ì¹˜ë©´ ìë™ìœ¼ë¡œ productionì´ë¼ê³  ì„¤ì •ë©ë‹ˆë‹¤.

ì´ì œ ìœ„ì™€ ê°™ì´ 'Uploaded'ë¼ëŠ” ë¬¸êµ¬ì™€ í•¨ê»˜ ìµœì¢…ì ìœ¼ë¡œ í™ˆí˜ì´ì§€ê°€ ë§Œë“¤ì–´ì¡Œë‹¤ê³  ë‚˜ì˜µë‹ˆë‹¤.

í•œ ë²ˆ ê·¸ ì£¼ì†Œë¥¼ í´ë¦­í•´ì„œ ë¸Œë¼ìš°ì €ì—ì„œ ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.

![](https://blogger.googleusercontent.com/img/a/AVvXsEjQioRBExfyueaN-1bNQgreDbs1F6ZuSTw8nM8V2W-cBDEO-0d49r6wFl9_A-aIUVERdEJt2hhcx9jCjaHUn7OhnX1dNH6Y2uCm22Fho83tWzYBFRi1l7o6d01cEMbNRvxZfcncqqcA8DOCnWSmYkCTqE7IaPhQVA2S4Z_FUj5iQUSzeRvBJUczCXzVUWk)

ìœ„ì™€ ê°™ì´ ë¸Œë¼ìš°ì €ì—ì„œë„ ì˜ ë‚˜ì˜µë‹ˆë‹¤.

ì‹¤ì œ Cloudflare ëŒ€ì‹œë³´ë“œì— ê°€ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¤ëŠ”ë°ìš”.

![](https://blogger.googleusercontent.com/img/a/AVvXsEjbZIhX62Jorg8ZVx6jYc8TTWyiSGx5NpmDmfMwXTGY2wxTIuYvzUZYsT4GBaf-KNG9BgBnkRHQfsxUk97ipAlm3S8uV050W7sPha9twr-n5TTpi0JkyqT7-_NDg8r3e4eCmlg8P4wrHQd6ARoiVpCoM8po4dfb2-Qali6eMtDtapRhTn6fpyypMFA0s9Y)

ìœ„ì™€ ê°™ì´ ì•„ê¹Œ ìš°ë¦¬ê°€ ì…ë ¥í–ˆë˜ project ì´ë¦„ì´ ê·¸ëŒ€ë¡œ ë‚˜ì˜µë‹ˆë‹¤.

ê·¸ë¦¬ê³  ì£¼ì†Œë„ í„°ë¯¸ë„ ì°½ì— ìˆë˜ ì£¼ì†Œì™€ ì‚¬ë­‡ ë‹¤ë¥¸ë°ìš”.

ëŒ€ì‹œë³´ë“œì— ìˆëŠ” ê²Œ ì •ì‹ ì£¼ì†Œê³  í„°ë¯¸ë„ ì°½ì— ìˆëŠ” ê±°ëŠ” ê°œë°œìš© ì„ì‹œ ì„œë²„ì…ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ ë¹Œë“œ ì‹œì ê¹Œì§€ ë‹¤ ë‚˜ì˜¤ê³  ìˆìŠµë‹ˆë‹¤.

ëŒ€ì‹œë³´ë“œì—ì„œëŠ” Settings ë¶€ë¶„ì„ ì„ íƒí•´ì„œ ì—¬ëŸ¬ ê°€ì§€ ì„¤ì •ì„ í•  ìˆ˜ ìˆëŠ”ë°ìš”.

ê·¸ê±´ ë‚˜ì¤‘ì— ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

![](https://blogger.googleusercontent.com/img/a/AVvXsEi3rU0DGRGShLMo-7-AzDPoezkTdDUKxKd_F3s6YXbKhWENB33Xqv5W4DgP4TibriI50KK9UkhkbyF3Xl9ox_BKQZIhKs2WMT3zwgIWlyD1d6xY4JASuQVYodbDSAINItlVBr8DAA838k2z0OnODrivXRQeIh2iZ5g87cmRpNB4QwADcZ49uW9A7HdI5mo)

ì°¸ê³ ë¡œ, ì œê°€ `npx wrangler init` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ëŠ”ë°ìš”.

`npx wrangler init` ëª…ë ¹ì–´ëŠ” ë°”ë¡œ Cloudflare ì•±ì„ ë§Œë“œëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.

ë¹ˆ ë””ë ‰í† ë¦¬ì—ì„œ í•œ ë²ˆ í•´ë³´ì‹­ì‹œì˜¤.

React êµ¬ì„±ì´ ì˜ˆì „ create-react-appì„ ì‚¬ìš©í•˜ê³  ìˆì–´ ë„ˆë¬´ ëŠë¦½ë‹ˆë‹¤.

ê·¸ë˜ì„œ ì œê°€ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì€ Viteë¥¼ ì´ìš©í•œ React ì•± êµ¬ì„± í›„ Cloudflare ì„œë¹„ìŠ¤ë¥¼ ì—°ê²°í•˜ëŠ” ê²ë‹ˆë‹¤.

ì¼ë‹¨ ì •ì  ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ…ì´ ì™„ë£Œë˜ì—ˆë„¤ìš”.

---

## 3. Workers ì´ìš©í•˜ì—¬ ë°±ì—”ë“œ ë¡œì§ êµ¬í˜„í•˜ê¸°

Cloudflare WorkersëŠ” ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ì¸ë°ìš”.

Vercel, Netlifyì—ë„ ìˆëŠ” ê·¸ ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ì…ë‹ˆë‹¤.

ê°„ë‹¨í•œ ë¡œì§ìœ¼ë¡œ ë°±ì—”ë“œ ë¡œì§ì„ êµ¬í˜„í•  ìˆ˜ ìˆëŠ”ë°ìš”.

CloudflareëŠ” Workersë¥¼ ë”°ë¡œ ì œê³µí•´ ì£¼ëŠ”ë°ìš”.

ë³´í†µ ìê¸° ê³„ì • ì´ë¦„ê³¼ í•¨ê»˜ Workers ì•±ì´ êµ¬í˜„ë©ë‹ˆë‹¤.

ê·¸ë˜ì„œ ì € ê°™ì€ ê²½ìš° cpro95.workers.devë¼ëŠ” ì„œë¸Œ ë„ë©”ì¸ì´ ìˆìŠµë‹ˆë‹¤.

ê·¸ë˜ì„œ workersë¥¼ ìƒˆë¡œ ë§Œë“¤ë©´ xxx.cpro95.workers.devë¼ëŠ” ì£¼ì†Œê°€ ë˜ëŠ” ê±°ì£ .

ë¬¼ë¡  ê³„ì • ì´ë¦„ ë§ê³  ë‹¤ë¥¸ ê±¸ë¡œ ì„œë¸Œ ë„ë©”ì¸ ì´ë¦„ì„ ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìê¸°ë§Œì˜ workersë¥¼ ë§Œë“¤ì–´ ë†“ìœ¼ë©´ ìì‹ ë§Œì˜ APIë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆê³ ,

ì‹¬ì§€ì–´, workersë¥¼ ì´ìš©í•˜ì—¬ ì§ì ‘ ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ë˜ëŠ” í™ˆí˜ì´ì§€ê¹Œì§€ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ë¶€ë¶„ì€ ë‹¤ìŒì— ë‹¤ë¤„ë³´ê¸°ë¡œ í•˜ê³ , ì˜¤ëŠ˜ì€ Workersë¥¼ Pages ë‚´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

ì°¸ê³ ë¡œ CloudflareëŠ” ì •ì±…ì ìœ¼ë¡œ workersë¥¼ í–¥í›„ Pages ì•ˆì—ì„œ êµ¬í˜„í•˜ë„ë¡ ê¶Œì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.

Workers êµ¬í˜„ì„ Pagesì—ì„œ í•˜ë ¤ë©´ í”„ë¡œì íŠ¸ ìµœìƒë‹¨ì— functionsë¼ëŠ” í´ë”ë¥¼ ë§Œë“¤ê³  ê·¸ ë°‘ì— js íŒŒì¼ì„ ë§Œë“¤ë©´ ë©ë‹ˆë‹¤.

ì°¸ê³ ë¡œ js íŒŒì¼ì´ë¦„ì€ ê·¸ëŒ€ë¡œ í•˜ë‚˜ì˜ ë¼ìš°íŒ… ì£¼ì†Œê°€ ë˜ê¸° ë•Œë¬¸ì— ì ë‹¹í•œ ì´ë¦„ì„ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

ë³´í†µ APIë¥¼ êµ¬í˜„í•˜ëŠ” ê±°ê¸° ë•Œë¬¸ì— functions/api í´ë”ë¥¼ ë§ì´ ë§Œë“¤ì£ .

ì´ì œ ì—¬ê¸°ì— hello.jsë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.

```js
// functions/api/hello.js

export function onRequest(ctx) {
  return new Response("Hello World!");
}
```

workers í•¨ìˆ˜ëŠ” ìœ„ì™€ ê°™ì´ onRequest í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ì•¼ í•˜ë©° í•´ë‹¹ í•¨ìˆ˜ëŠ” Responseë¥¼ ë¦¬í„´í•´ì•¼ í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  onRequest í•¨ìˆ˜ëŠ” ctxë¼ëŠ” Contextë¼ëŠ” ê°ì²´ë¥¼ ì œê³µí•˜ëŠ”ë°ìš”.

ì´ ctxë¼ëŠ” ê°ì²´ë¡œ ì—¬ëŸ¬ ê°€ì§€ ì¼ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¼ë‹¨ ìœ„ì™€ ê°™ì´ í•˜ê³  ì €ì¥í•©ì‹œë‹¤.

ê·¸ë¦¬ê³  ë‹¤ì‹œ npm run build ì•ˆ í•˜ê³  ê·¸ëƒ¥ ë°”ë¡œ deployë§Œ í•´ ë³´ê² ìŠµë‹ˆë‹¤.

```bash
âœ  cloudflare-pages-d1-stack-example> npx wrangler pages deploy ./dist
âœ¨ Compiled Worker successfully
ğŸŒ  Uploading... (4/4)

âœ¨ Success! Uploaded 0 files (4 already uploaded) (0.51 sec)

âœ¨ Uploading Functions bundle
âœ¨ Deployment complete! Take a peek over at https://08bfc080.pages-d1-fullstack-example.pages.dev
âœ  cloudflare-pages-d1-stack-example>
```

ì•„ê¹Œì™€ ë‹¤ë¥¸ ì ì€ wrangler ëª…ë ¹ì–´ê°€ ì•Œì•„ì„œ Worker ë¶€ë¶„ì„ ì•Œì•„ì±„ê³  Worker ë¡œì§ë„ í•¨ê»˜ Cloudflare Pagesì— ì˜¬ë ¤ ì¤ë‹ˆë‹¤.

ì´ì œ ìš°ë¦¬ê°€ ë§Œë“  Workersê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ ë³´ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ì£¼ì†Œë¡œ ì´ë™í•´ ë´…ì‹œë‹¤.

ìš°ë¦¬ê°€ ë§Œë“  hello.js íŒŒì¼ì— ë”°ë¼ ì£¼ì†ŒëŠ” "api/hello"ê°€ ë©ë‹ˆë‹¤.

![](https://blogger.googleusercontent.com/img/a/AVvXsEinJLTFd-TDEdPYkPGE2tvqfNCmiI6LrStCzGXUejg-mZShyzY_OKSeOK5KwnWPb-Afhn1kWq-P1H7q9uhPaAdE32BUlQgAdDuWi1ET1y_CZeeRYCAqYyCc7ATLkB44dbDGHxLfrvREtdL-ltYk48pL6oTlAZernqgSFIwan4shDBY6CE7M1AP0sNcCvNI)

ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ Cloudflare ì—£ì§€ ì„œë²„ì— ì œê°€ ë§Œë“  APIê°€ ì˜¬ë¼ê°”ìŠµë‹ˆë‹¤.

ì´ì œ ë°±ì—”ë“œ ë¡œì§ì„ êµ¬í˜„í•  ëª¨ë“  ì¤€ë¹„ê°€ ëë‚¬ìŠµë‹ˆë‹¤.

ì ê¹, ì—¬ê¸°ì„œ ê³„ì† Cloudflare ì—£ì§€ ì„œë²„ì— ì •ì‹ìœ¼ë¡œ ë°°í¬(deploy) í•˜ì§€ ë§ê³  ê°œë°œ ì„œë²„ë¥¼ ëŒë ¤ì„œ í™•ì¸í•  ë°©ë²•ì´ ì—†ì„ê¹Œìš”?

wrangler ëª…ë ¹ì–´ëŠ” dev í‚¤ì›Œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

í•´ë‹¹ í‚¤ì›Œë“œê°€ ê·¸ê±¸ ì§€ì›í•´ ì£¼ëŠ”ë°ìš”.

```bash
âœ  cloudflare-pages-d1-stack-example> npx wrangler pages dev ./dist
â–² [WARNING] No compatibility_date was specified. Using today's date: 2023-12-06.

  Pass it in your terminal:
  
  --compatibility-date=2023-12-06
  
  See https://developers.cloudflare.com/workers/platform/compatibility-dates/ for more information.


Compiling worker to "/Users/cpro95/Codings/Javascript/blog/cloudflare-pages-d1-stack-example/.wrangler/tmp/pages-9wdp2v/functionsWorker-0.4568567797378653.mjs"...
âœ¨ Compiled Worker successfully
 â›…ï¸ wrangler 3.19.0
-------------------
â–² [WARNING] --local is no longer required and will be removed in a future version.

  `wrangler dev` now uses the local Cloudflare Workers runtime by default. ğŸ‰


â” Starting local server...
[wrangler:inf] Ready on http://localhost:8788
[wrangler:inf] GET / 200 OK (44ms)
[wrangler:inf] GET /assets/index-UJjASkPh.js 200 OK (32ms)
[wrangler:inf] GET /assets/index-sWUpnV8R.css 200 OK (72ms)
[wrangler:inf] GET /api/hello 200 OK (3ms)
âœ¨ Compiled Worker successfully
â” Reloading local server...
[wrangler:inf] GET /api/hello 200 OK (10ms)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ [b] open a browser, [d] open Devtools, [c] clear console, [x] to exit                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

ìœ„ì™€ ê°™ì´ ë‚˜ì˜¤ëŠ”ë°ìš”. ì—¬ê¸°ì„œ 'b' í‚¤ë¥¼ ëˆ„ë¥´ë©´ ë¸Œë¼ìš°ì €ê°€ ë°”ë¡œ ëœ¹ë‹ˆë‹¤.

ê·¸ë˜ê³  hello.js íŒŒì¼ì˜ ë‚´ìš©ì„ ê³ ì³ë³¼ê¹Œìš”?

![](https://blogger.googleusercontent.com/img/a/AVvXsEi-dJN4KccwAamWfwOZghENJw-6pdTkdjA_PeHdpQm53FyJl7Yh4kLeMYlEJ5h0sEtHVqc0Lt0J1uQLW94nzw5IqhsAyyLTfF_gbJdcxxgZQ8jfCF9BePE4veaVBScFW5TKteqxPeOEs2C0u_lld7wo5YitZSu7GTeLl1mb8KNWC47bPKBYGc95tRzzmSY)

ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ ë¸Œë¼ìš°ì €ë¥¼ ìƒˆë¡œê³ ì¹¨ í•˜ë©´ ë°”ë¡œ ë°˜ì˜ë©ë‹ˆë‹¤.

ì–´ë–¤ê°€ìš”?

workers ë¶€ë¶„ì— ëŒ€í•œ ê°œë°œ ì„œë²„ êµ¬ì¶•ì´ ì™„ë£Œë˜ì—ˆëŠ”ë°ìš”.

ê·¸ëŸ¬ë©´ React ë¶€ë¶„ì˜ Hot-Reloading ë¶€ë¶„ì€ ì–´ë–»ê²Œ í• ê¹Œìš”?

package.json íŒŒì¼ì˜ scripts ë¶€ë¶„ì— ì•„ë˜ì™€ ê°™ì´ ë§Œë“­ë‹ˆë‹¤.

```json
  "scripts": {
    "dev:ui": "vite",
    "dev": "wrangler pages dev --compatibility-date=2023-12-06 -- npm run dev:ui",
    "build": "tsc && vite build",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "preview": "vite preview"
  },
```

ê³ ì¹œ ê±°ëŠ” dev:ui ë¶€ë¶„ê³¼ dev ë¶€ë¶„ì…ë‹ˆë‹¤.

ê·¸ë¦¬ê³  wranger ë¶€ë¶„ì— '--compatibility-date=2023-12-06' ì´ë¼ëŠ” ì˜µì…˜ì„ ë„£ì—ˆëŠ”ë°ìš”.

ì´ ë¶€ë¶„ì„ ë„£ì–´ì¤˜ì•¼ í˜¸í™˜ì„± ë¶€ë¶„ì„ ì •í™•íˆ ì œê³µí•  ìˆ˜ ìˆì–´ wranglerê°€ í•˜ë¼ëŠ” ë°ë¡œ ë„£ìœ¼ì‹œë©´ ë©ë‹ˆë‹¤.

ê°„í˜¹ ë‚ ì§œ ë¶€ë¶„ì´ ì˜ˆì „ ë‚ ì§œê°€ ë‚˜ì˜¬ ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ, wranglerê°€ ì§€ì‹œí•˜ëŠ” ë‚ ì§œë¥¼ ë„£ìœ¼ì‹œë©´ ë©ë‹ˆë‹¤.

ì´ì œ, 'npm run dev'ë¥¼ í†µí•´ React ë¶€ë¶„ì˜ í•« ë¦¬ë¡œë”©ì„ í…ŒìŠ¤íŠ¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.

```bash
MiniflareCoreError [ERR_RUNTIME_FAILURE]: The Workers runtime failed to start. There is likely additional logging output above.
    at #assembleAndUpdateConfig (/Users/cpro95/Codings/Javascript/blog/cloudflare-pages-d1-stack-example/node_modules/miniflare/dist/src/index.js:8889:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Mutex.runWith (/Users/cpro95/Codings/Javascript/blog/cloudflare-pages-d1-stack-example/node_modules/miniflare/dist/src/index.js:3861:16) {
  code: 'ERR_RUNTIME_FAILURE',
  cause: undefined
}
```

ê°œë°œ ì„œë²„ë¥¼ ëŒë¦¬ë©´ ìœ„ì™€ ê°™ì´ MiniflareCoreErrorê°€ ê°„í˜¹ ë‚˜ì˜¤ëŠ”ë°ìš”.

ì´ ê²½ìš°ëŠ” wranger dev ëª…ë ¹ì–´ê°€ ì¤‘ë³µëë‹¤ëŠ” ì˜ë¯¸ê°€ ê±°ì˜ 99%ì…ë‹ˆë‹¤.

ë‹¤ë¥¸ í„°ë¯¸ë„ì— ê°œë°œ ì„œë²„ë¥¼ ì—´ì–´ ë†¨ê±°ë‚˜, ì•„ë‹ˆë©´ 'workerd' ë¼ëŠ” ëª…ë ¹ì–´ê°€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì œëŒ€ë¡œ kill ë˜ì§€ ì•Šì•„ì„œ ì¼ ê²ë‹ˆë‹¤.

```bash
killall workerd
```
ìœ„ì™€ ê°™ì´ í„°ë¯¸ë„ìƒì—ì„œ 'workerd' ë¼ëŠ” worker demonì„ ëª¨ë‘ ì£½ì´ë©´ ë©ë‹ˆë‹¤.

ìœˆë„ìš° ì‚¬ìš©ìë¼ë©´ taskkillì„ ì´ìš©í•˜ì‹œê±°ë‚˜ ë°±ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì°¾ì•„ì„œ ì£½ì´ì‹œë©´ ë©ë‹ˆë‹¤.

```bash
âœ  cloudflare-pages-d1-stack-example> killall workerd
âœ  cloudflare-pages-d1-stack-example> npm run dev

> cloudflare-pages-d1-stack-example@0.0.0 dev
> wrangler pages dev --compatibility-date=2023-12-06 -- npm run dev:ui

Running npm run dev\:ui...
Sleeping 5 seconds to allow proxy process to start before attempting to automatically determine port...
To skip, specify the proxy port with --proxy.
[proxy]:
> cloudflare-pages-d1-stack-example@0.0.0 dev:ui
> vite


[proxy]: Port 5173 is in use, trying another one...

[proxy]:
  VITE v5.0.6  ready in 367 ms


[proxy]:   âœ  Local:   http://localhost:5174/
  âœ  Network: use --host to expose

Automatically determined the proxy port to be 5174.
Compiling worker to "/Users/cpro95/Codings/Javascript/blog/cloudflare-pages-d1-stack-example/.wrangler/tmp/pages-zIsHrF/functionsWorker-0.18787902221672237.mjs"...
âœ¨ Compiled Worker successfully
 â›…ï¸ wrangler 3.19.0
-------------------
â–² [WARNING] --local is no longer required and will be removed in a future version.

  `wrangler dev` now uses the local Cloudflare Workers runtime by default. ğŸ‰


â” Starting local server...
[wrangler:inf] Ready on http://localhost:8788
[wrangler:inf] GET / 200 OK (106ms)
[wrangler:inf] GET /@vite/client 200 OK (541ms)
[wrangler:inf] GET /@react-refresh 304 Not Modified (401ms)
[wrangler:inf] GET /src/main.tsx 200 OK (576ms)
[wrangler:inf] GET /node_modules/vite/dist/client/env.mjs 304 Not Modified (351ms)
[wrangler:inf] GET /src/App.tsx 200 OK (337ms)
[wrangler:inf] GET /src/App.css 200 OK (55ms)
[wrangler:inf] GET /src/index.css 200 OK (417ms)
[wrangler:inf] GET / 101 Switching Protocols (60ms)
[wrangler:inf] GET /node_modules/.vite/deps/react.js 200 OK (480ms)
[wrangler:inf] GET /node_modules/.vite/deps/react_jsx-dev-runtime.js 200 OK (495ms)
[wrangler:inf] GET /node_modules/.vite/deps/react-dom_client.js 200 OK (541ms)
[wrangler:inf] GET /node_modules/.vite/deps/chunk-4YP5LC2O.js 200 OK (338ms)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ [b] open a browser, [d] open Devtools, [c] clear console, [x] to exit                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

ìœ„ì™€ ê°™ì´ ë‚˜ì˜¤ëŠ”ë°ìš”.

ì € ê°™ì€ ê²½ìš° ê¸°ì¡´ 5173 í¬íŠ¸ê°€ ëˆ„ê°€ ì‚¬ìš©í•˜ê³  ìˆë‹¤ê³  ë‚˜ì˜¤ëŠ”ë°ìš”.

ì´ê±´ Vite ë²„ê·¸ ê°™ìŠµë‹ˆë‹¤.

ì˜ˆì „ dev ì„œë²„ê°€ ì™„ì „íˆ ì£½ì§€ ì•ŠëŠ” ë²„ê·¸ì¸ë°ìš”.

kill ëª…ë ¹ì–´ë¥¼ í†µí•´ ì£½ì—¬ì£¼ë©´ ë©ë‹ˆë‹¤.

ì´ì œ, App.tsx íŒŒì¼ì—ì„œ ì¼ë¶€ ë¬¸êµ¬ë¥¼ ë³€ê²½í•´ ë³´ì„¸ìš”.

ê·¸ë¦¼ìœ¼ë¡œ ìº¡ì²˜ë¥¼ ì•ˆ í–ˆëŠ”ë°, 100% ì œëŒ€ë¡œ ì‘ë™í•˜ê³  ìˆëŠ” ê±¸ ë³¼ ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.

ì´ì œ ê°œë°œ ì„œë²„ êµ¬í˜„ì€ ëª¨ë‘ ëë‚¬ë„¤ìš”.

---

## 4. D1 ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©í•˜ê¸°

Cloudflareê°€ DB ì„œë¹„ìŠ¤ë¡œ ì œê³µí•˜ëŠ” D1ì´ë¼ëŠ” ì„œë¹„ìŠ¤ê°€ ìˆëŠ”ë°ìš”.

ì•„ì§ì€ ë² íƒ€ì…ë‹ˆë‹¤.

ê·¸ë˜ë„ ì‚¬ìš©ì€ í•  ì •ë„ë¡œ ê½¤ ì•ˆì •í™”ë˜ì—ˆê³ , ë¬´ì—‡ë³´ë‹¤ ë¹ ë¥´ê³  ë¬´ë£Œë¼ëŠ” ì ì…ë‹ˆë‹¤.

5Gê¹Œì§€ ë¬´ë£Œì¸ë°ìš”.

Workers ë¬´ë£Œ ì‚¬ìš©ìë¼ë©´ ë¬´ì¡°ê±´ 5Gê¹Œì§€ ë¬´ë£Œì…ë‹ˆë‹¤.

in, out ë°ì´í„° ì‚¬ìš©ëŸ‰ ëª¨ë‘ ì‚¬ìš©í–ˆë”ë¼ë„ ì¶”ê°€ ìš”ê¸ˆì„ ë¶€ê³¼í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ ê·¸ëƒ¥ ì„œë¹„ìŠ¤ê°€ ì •ì§€ë˜ëŠ” í˜•íƒœë¼ ê³¼ê¸ˆ ê±±ì •ì´ ì—†ìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³  ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ ì €ì¥ìœ¼ë¡œëŠ” 5G ìš©ëŸ‰ì€ ì°¨ê³  ë„˜ì¹˜ê³ ìš”.

ë˜ D1ì´ Sqlite ê¸°ë°˜ì´ë¼ ë„ˆë¬´ ì‰½ìŠµë‹ˆë‹¤.

D1 DB ì„¤ì •ë„ ì»¤ë§¨ë“œë¼ì¸ì—ì„œ wrangler ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ë§Œë“¤ ê²ë‹ˆë‹¤.

```bash
âœ  cloudflare-pages-d1-stack-example> npx wrangler d1
wrangler d1

ğŸ—„  Interact with a D1 database

Commands:
  wrangler d1 list                List D1 databases
  wrangler d1 info <name>         Get information about a D1 database, including the current database size and state.
  wrangler d1 create <name>       Create D1 database
  wrangler d1 delete <name>       Delete D1 database
  wrangler d1 backup              Interact with D1 Backups
  wrangler d1 execute <database>  Executed command or SQL file
  wrangler d1 time-travel         Use Time Travel to restore, fork or copy a database at a specific point-in-time.
  wrangler d1 migrations          Interact with D1 Migrations

Flags:
  -j, --experimental-json-config  Experimental: Support wrangler.json  [boolean]
  -c, --config                    Path to .toml configuration file  [string]
  -e, --env                       Environment to use for operations and .env files  [string]
  -h, --help                      Show help  [boolean]
  -v, --version                   Show version number  [boolean]

--------------------
ğŸš§ D1 is currently in open beta
ğŸš§ Please report any bugs to https://github.com/cloudflare/workers-sdk/issues/new/choose
--------------------
```

d1 ì„œë¹„ìŠ¤ì˜ ëª…ë ¹ì–´ ë„ì›€ë§ í™”ë©´ì…ë‹ˆë‹¤.

ë‹¹ì—°íˆ create ëª…ë ¹ì–´ë¥¼ ì‚¬ìš© í•´ì•¼ê² ë„¤ìš”.

```bash
âœ  cloudflare-pages-d1-stack-example> npx wrangler d1 create pages-d1-stack
âœ… Successfully created DB 'pages-d1-stack' in region APAC
Created your database using D1's new storage backend. The new storage backend is not yet recommended
for production workloads, but backs up your data via point-in-time restore.

[[d1_databases]]
binding = "DB" # i.e. available in your Worker on env.DB
database_name = "pages-d1-stack"
database_id = "2ddfdc8f4-9601-4ae2-aeaa-12adfasdf6d8820f"
```

ìœ„ì™€ ê°™ì´ create ëª…ë ¹ì–´ ë’¤ì— ì´ë¦„ì„ ì‘ì„±í•˜ë©´ ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ d1_databaseê°€ ìƒì„±ë˜ê³  í•´ë‹¹ ì •ë³´ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

ìœ„ ì •ë³´ëŠ” ì•„ì£¼ ì¤‘ìš”í•œë°ìš”.

íŠ¹íˆ database_idê°€ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤.

database_idëŠ” ëŒ€ì‹œë³´ë“œì˜ D1 ë¶€ë¶„ì— ê°€ë„ ì•„ë˜ ê·¸ë¦¼ì²˜ëŸ¼ ë‚˜ì˜µë‹ˆë‹¤.

![](https://blogger.googleusercontent.com/img/a/AVvXsEhf4jC4FJhtajxkpHH-Pyx2Cr0bdYFaAWlF3SvfFL4lQEa_jjBy0HpDmeQi7LoG_xMF0qj_cZG90Ao_0PsiZkwV9Ao_wuVEDgsrwI0oYgt9TdSFqWat-cvM6ARIqvkvDgOm8fPMs0hWtOcpIfp2vn16ELqipPfVNJNax_qgpunw_3LIDRePfMOLJ2zNADk)

ìœ„ ê·¸ë¦¼ì—ì„œ ë°©ê¸ˆ ë§Œë“  pages-d1-stack ì´ë¦„ì„ ëˆ„ë¥´ë©´ ì•„ë˜ ê·¸ë¦¼ì²˜ëŸ¼ ë‚˜ì˜¤ëŠ”ë°ìš”.

í…Œì´ë¸”ì´ ì—†ë‹¤ê³  ë‚˜ì˜µë‹ˆë‹¤.

![](https://blogger.googleusercontent.com/img/a/AVvXsEgSt4P9LhiE8gThxkKdEIA_1jIzkeOtqiAIwLKMUvWPZ7CjmJY-M_4Z_9tL3Ru7Xj0zLhcDe8e_rCHd_hFh1rhmCEhaHPHexVcag1LS8gT7obBo2v17w-FEgymQUxN3Daz_97GzSwty54x_8GxcggqDIWkHX53VdXs9w-2cUxsAuyZftaqdi5hzW1kyvrQ)

ì´ì œ í…Œì´ë¸”ì„ ë§Œë“¤ì–´ì•¼ í•˜ëŠ”ë°ìš”.

ëŒ€ì‹œë³´ë“œì—ì„œ ì§ì ‘ ë§Œë“¤ ìˆ˜ë„ ìˆê³ , í„°ë¯¸ë„ìƒì—ì„œ sql íŒŒì¼ì„ ì´ìš©í•´ì„œ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ì €ëŠ” í›„ìì˜ ë°©ì‹ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

ë‚˜ì¤‘ì— ìë™í™”ë˜ëŠ” ë°°í¬ ëª…ë ¹ì–´ë¥¼ êµ¬í˜„í•˜ê¸° ì‰½ê±°ë“ ìš”.

sql íŒŒì¼ì€ í”„ë¡œì íŠ¸ ìµœìƒë‹¨ í´ë”ì—ì„œ ì•„ë¬´ ì´ë¦„ìœ¼ë¡œ ë§Œë“¤ë©´ ë©ë‹ˆë‹¤.

ì €ëŠ” "todos.sql"ì´ë¼ê³  í–ˆìŠµë‹ˆë‹¤.

```bash
CREATE TABLE todos (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  desc TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT (datetime(CURRENT_TIMESTAMP,'localtime'))
);

INSERT INTO todos(title, desc) VALUES('test title','test desc');
```

ìœ„ì™€ ê°™ì´ í…Œì´ë¸” ì´ë¦„ì´ todosì´ë€ ì´ë¦„ìœ¼ë¡œ SQLì—ì„œ í…Œì´ë¸” ë§Œë“œëŠ” SQL êµ¬ë¬¸ì¸ë°ìš”.

í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë”ë¯¸ ë°ì´í„°ë„ ë„£ëŠ” INSERT ëª…ë ¹ì–´ êµ¬ë¬¸ë„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

ì´ì œ ì´ sql ëª…ë ¹ì–´ë¥¼ D1 ë°ì´í„°ë² ì´ìŠ¤ê°€ ì½ê³  ì‹¤í–‰í•˜ê²Œ í•´ì•¼ í•˜ëŠ”ë°ìš”.

ì´ ë¶€ë¶„ë„ wrangler ëª…ë ¹ì–´ê°€ ì œê³µí•´ ì¤ë‹ˆë‹¤.

```bash
âœ  cloudflare-pages-d1-stack-example> npx wrangler d1 execute pages-d1-stack --file=./todos.sql
ğŸŒ€ Mapping SQL input into an array of statements
ğŸŒ€ Parsing 2 statements
ğŸŒ€ Executing on remote database pages-d1-stack (2613c8f4-9601-4dd2-aeaa-126d5dd8820f):
ğŸŒ€ To execute on your local development database, pass the --local flag to 'wrangler d1 execute'
ğŸš£ Executed 2 commands in 0.7682ms

âœ  cloudflare-pages-d1-stack-example>
```

ìœ„ì™€ ê°™ì´ npx wrangler d1 execute ëª…ë ¹ì–´ ë’¤ì— DB ë„¤ì„ì„ ì ê³  ê·¸ë‹¤ìŒ '--file' ì˜µì…˜ìœ¼ë¡œ ì•„ê¹Œ ë§Œë“  todos.sql íŒŒì¼ì„ ì§€ì •í•´ ì£¼ë©´ ì›ê²©ì„œë²„ì—ì„œ í•´ë‹¹ sql ë¬¸ì¥ì„ ì‹¤í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.

ì´ì œ Cloudflare ëŒ€ì‹œë³´ë“œë¥¼ ë³¼ê¹Œìš”?

![](https://blogger.googleusercontent.com/img/a/AVvXsEjOqNSmreQlbuwDdXzVtWSVs6qSO04LPDF6SuCLtEAO38vD12K4k-2qf9nL2SrKwSZ3eDTaBiharnCHtsT1Bfy27QOWg4cHforQiXC1LK4YUYuNMz6w2KezaYnDDZn1fpK1CsANoFFQYAfXnJt7sNAddA_QdxGP4sy6mJvnH1E8OvkmfL6ALceiAA5EaiY)

![](https://blogger.googleusercontent.com/img/a/AVvXsEjDKDkC04vw0Simp8qm_ylBiDWIjXxWxaml5eYab9zEV40GMevHKckOtrwHJopDvJP0Sy0HeJsp9YPckG45eBx86Ko29zjZDY8o8HHL-KYUUJOkqjLzeAKMlU92_NobpUJgzQw6LO801MlxW_vUK7t5UAG-fNlukNsmJUtRbvjzXtnbBDg1irYwRfafcSI)

ìœ„ì˜ ë‘ ê·¸ë¦¼ì²˜ëŸ¼ ëŒ€ì‹œë³´ë“œì—ì„œ ì™„ë²½í•˜ê²Œ D1 ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ UIë¥¼ ì œê³µí•©ë‹ˆë‹¤.

ì—¬ê¸°ì„œ í•˜ë‚˜ ë” íŒì´ ìˆëŠ”ë°ìš”.

wrangler ëª…ë ¹ì–´ë¡œ í„°ë¯¸ë„ì—ì„œ ì—£ì§€ ì„œë²„ì˜ D1 ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ì†í•´ì„œ SQL ë¬¸ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
âœ  cloudflare-pages-d1-stack-example> npx wrangler d1 execute pages-d1-stack --command="select * from todos;"
ğŸŒ€ Mapping SQL input into an array of statements
ğŸŒ€ Parsing 1 statements
ğŸŒ€ Executing on remote database pages-d1-stack (2613c8f4-9601-4dd2-aeaa-126d5dd8820f):
ğŸŒ€ To execute on your local development database, pass the --local flag to 'wrangler d1 execute'
ğŸš£ Executed 1 commands in 0.2841ms
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ title      â”‚ desc      â”‚ created_at          â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ test title â”‚ test desc â”‚ 2023-12-06 13:19:56 â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ  cloudflare-pages-d1-stack-example>
```

í˜„ì¬ ë””ë ‰í† ë¦¬ê°€ ê¸¸ì–´ì„œ ëª…ë ¹ì–´ê°€ ì˜ ì•ˆ ë³´ì´ëŠ”ë°ìš”.

```bash
npx wrangler d1 execute pages-d1-stack --command="select * from todos;"
```

ìœ„ì™€ ê°™ì´ '--command' ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

ì´ì œ, D1 ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì™„ë²½í•œ ë°©ë²•ì„ ìˆ™ì§€í•œ ê±° ê°™ë„¤ìš”.

ê·¸ëŸ¼ 2í¸ì—ì„œ ë³¸ê²©ì ì¸ D1 DBë¥¼ í™œìš©í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œì— ì°©ìˆ˜í•´ ë³´ê² ìŠµë‹ˆë‹¤.

---

